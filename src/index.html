<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<img src="" alt="" class="img-1">
</body>
<script src="utils.js"></script>
<script>
    async function myFirstAsyncFunction() {
        try {
            // const fulFilledValue = await promise;
        }
        catch (rejectedValue) {

        }
    }

    var img1 = document.querySelector('.img-1');

    function loaded() {
        console.info('load!');
    }

    // イベント
    // if (img1.complete) {
    //     loaded();
    // }
    // else {
    //     img1.addEventListener('load', loaded);
    // }
    //
    // img1.addEventListener('error', () => {
    // });

    // img1.ready().then(() => {
    //     loaded();
    // }, () => {
    //
    // });

    var promise = new Promise((resolve, reject) => {
        if (true) {
            resolve('Stuff worked!');
        }
        else {
            reject(Error('It broke'));
        }
    });

    promise.then(result => {
        console.log(result);
    }, err => {
        console.log(err);
    })

    const url = 'story.json';

    get(url).then(response => {
        return JSON.parse(response);
    }, error => {
        console.log('Failed!', error);
    }).then(response => {
        console.log("Yey JSON!", response);
    });

    const promise2 = new Promise((resolve, reject) => resolve(1));

    promise2.then(val => {
        console.log(val);
        return val + 2;
    }).then(val => {
        console.log(val);
    });

    getJSON(url).then(story => getJSON(story.chapterUrls[0]))
        .then(chapter1 => {
            console.log('Got chapter 1!', chapter1);
        }, error => {
            console.log(error);
        });

    var storyPromise;

    getChapter(0).then(chapter => {
        console.log(chapter);
        return getChapter(1);
    }).then(chapter => {
        console.log(chapter);
    })
</script>
</html>